import { getMarketBySlug } from '@/app/actions/markets'
import { notFound } from 'next/navigation'
import { BettingInterface } from '@/components/betting-interface'

export default async function MarketPage({ params }: { params: { slug: string } }) {
  const market = await getMarketBySlug(params.slug)
  if (!market) notFound()

  return (
    <div className="max-w-2xl mx-auto pb-24 px-2">
      <div className="mb-6">
        <div className="inline-block px-3 py-1 bg-[#2E5CFF]/20 text-[#2E5CFF] rounded-full text-xs mb-3 capitalize font-medium">
            {market.category}
        </div>
        <h1 className="text-2xl md:text-3xl font-bold leading-tight text-white">{market.title}</h1>
        <p className="text-gray-400 mt-2 text-sm">
            Closes on {new Date(market.closesAt).toLocaleDateString()}
        </p>
      </div>

      {/* Chart Placeholder */}
      <div className="h-64 bg-white/5 rounded-3xl flex items-center justify-center mb-8 border border-white/10">
         <div className="text-center">
             <span className="text-4xl mb-2 block">ðŸ“ˆ</span>
             <span className="text-gray-500 text-sm">Live Odds Chart Coming Soon</span>
         </div>
      </div>

      <BettingInterface market={market} options={market.options} />
      
      <div className="mt-8 p-6 bg-white/5 rounded-3xl border border-white/5">
         <h3 className="font-bold mb-2 text-white">About this market</h3>
         <p className="text-gray-400 text-sm leading-relaxed">
            This market is {market.sourceType === 'ai_generated' ? 'automatically generated by our AI Trend Agent' : 'manually created'}.
            Prediction markets allow you to bet on future outcomes. Results are settled based on credible news sources.
         </p>
      </div>
    </div>
  )
}
